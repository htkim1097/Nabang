{{> common/header}}
<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nouislider@15.7.0/dist/nouislider.min.css">
    <script src="https://cdn.jsdelivr.net/npm/nouislider@15.7.0/dist/nouislider.min.js"></script>
</head>

<main class="main-home survey-page">
    <!-- 흐린 배경 이미지 및 오버레이 -->
    <div class="background-overlay">
        <img src="/assets/images/room3.jpg" alt="배경이미지" class="main-large-img bg-fade-img"/>
    </div>

    <!-- 설문 타이틀 -->
    <h1 class="page-title survey-title">방의 유형을 선택해주세요</h1>
    
    <form class="survey-form">
        <div class="select-opt-row">
            <div class="select-group">
                <label for="room-type">매물 유형</label>
                <select id="room-type" name="roomType" class="main-select">
                    <option value="0">전체</option>
                    <option value="1">원룸</option>
                    <option value="2">투룸</option>
                    <option value="3">아파트</option>
                </select>
            </div>
            <div class="select-group">
                <label for="deal-type">거래 유형</label>
                <select id="deal-type" name="dealType" class="main-select">
                    <option value="0">전체</option>
                    <option value="1">월세</option>
                    <option value="2">전세</option>
                    <option value="3">매매</option>
                </select>
            </div>
        </div>

        <!-- 슬라이더: 보증금(전세금) -->
        <div class="slider-group">
            <label for="deposit" class="slider-label">보증금(전세금)</label>
            <div class="slider-row">
                

                <div id="deposit-range"></div>
                <span id="deposit-range-value"></span>

                <span class="slider-value">최소~무제한</span>
            </div>
        </div>

        <!-- 슬라이더: 월세 -->
        <div class="slider-group">
            <label for="monthly" class="slider-label">월세</label>
            <div class="slider-row">
                <input type="range" id="monthly" min="0" max="1000000" value="0" step="50000">
                <span class="slider-value">최소~무제한</span>
            </div>
        </div>

        <!-- Next / Previous 버튼 -->
        <div class="form-nav survey-nav">
            <button type="button" class="base-btn previous-btn">&larr; Previous</button>
            <button type="button" class="base-btn next-btn">Next &rarr;</button>
        </div>
    </form>

    <!-- 좌하단 고정 Home 버튼 -->
    <div class="side-nav">
        <button type="button" class="base-btn side-nav-btn">Home</button>
    </div>
</main>

{! <script type="text/javascript" src="/js/custom-slider.js"></script> }

<script>
document.addEventListener('DOMContentLoaded', function() {
    var slider = document.getElementById('deposit-slider');
    noUiSlider.create(slider, {
        start: [1000000, 40000000], // 최소값, 최대값 초기 설정
        connect: true,              // 색상으로 범위 표시
        range: {
            'min': 0,
            'max': 100000000
        },
        step: 1000000,              // 단위(예: 100만원)
        tooltips: [true, true],     // 조절자에 값 표시
        format: {
            to: function(value) { return Math.round(value) + '원'; },
            from: function(value) { return Number(value.replace('원','')); }
        }
    });

    var valuesBox = document.getElementById('deposit-slider-values');
    slider.noUiSlider.on('update', function(values, handle) {
        // values[0] = 최소, values[1] = 최대
        valuesBox.textContent = values + ' ~ ' + values[1];
    });
});

document.getElementById('submitBtn').addEventListener('click', function() {
    var slider = document.getElementById('deposit-slider');
    var range = slider.noUiSlider.get();   // [최소값, 최대값]
    // 예: 서버로 전송 또는 화면에 출력
    console.log(range); // [ '1000000원', '40000000원' ]
});
</script>